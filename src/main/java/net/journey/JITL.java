package net.journey;

import net.journey.proxy.CommonProxy;
import net.minecraft.util.ResourceLocation;
import net.minecraftforge.fml.common.Mod;
import net.minecraftforge.fml.common.Mod.EventHandler;
import net.minecraftforge.fml.common.Mod.Instance;
import net.minecraftforge.fml.common.SidedProxy;
import net.minecraftforge.fml.common.event.*;
import net.slayer.api.SlayerAPI;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import java.util.ArrayList;

@Mod(name = JITL.MOD_NAME, modid = JITL.MOD_ID, version = JITL.MOD_VERSION, dependencies = JITL.DEPENDENCIES, updateJSON = JITL.UPDATE_URL)
public class JITL {
	public static final String MOD_NAME = "Journey Into the Light";
	public static final String MOD_ID = "journey";
	public static final String MOD_VERSION = "GRADLETOKEN_VERSION"; //will be automatically changed during build task
	public static final String DEPENDENCIES = "required-after:baubles@[1.5.2,);";
	public static final String UPDATE_URL = "https://raw.githubusercontent.com/TheSlayerMC/Journey-Into-The-Light/master/update.json";

	/**
	 * Equals true only if journey is launched in its development workspace.
	 * Will be set to false in any other mod dev workspace.
	 */
	public static final boolean IN_JOURNEY_DEV = true; // will be automatically replaced to false during build
	public static final Logger LOGGER = LogManager.getLogger(MOD_NAME);

	@Instance(JITL.MOD_ID)
	public static JITL instance;
	@SidedProxy(clientSide = "net.journey.proxy.ClientProxy", serverSide = "net.journey.proxy.CommonProxy")
	public static CommonProxy proxy;

	@EventHandler
	public static void preInit(FMLPreInitializationEvent event) {
		proxy.preInit(event);

		ArrayList<String> author = new ArrayList<>();
		author.add("The_SlayerMC");
		event.getModMetadata().autogenerated = false;
		event.getModMetadata().credits =
				SlayerAPI.Colour.AQUA + "The_SlayerMC - Owner/Creator/Developer/Code/Assets/Music, " +
						SlayerAPI.Colour.GREEN + "Dash - Code Helper/Gen Tweaker, " +
						SlayerAPI.Colour.BLUE + "Dizzlepop12 - Artist/Music/Models/Code/Co-Developer, " +
						SlayerAPI.Colour.LIGHT_PURPLE + "Time_Conqueror - Code Helper, Co-Developer, " +
						SlayerAPI.Colour.DARK_AQUA + "NicosaurusRex99 - Code ";
		event.getModMetadata().description = "A full progressional experience that adds Weapons, Mobs, Dimensions, Bosses, and much more to your game.";
		event.getModMetadata().modId = JITL.MOD_ID;
		event.getModMetadata().url = "https://slayermods.net";
		event.getModMetadata().name = JITL.MOD_NAME;
		event.getModMetadata().version = JITL.MOD_VERSION;
		event.getModMetadata().logoFile = "assets/journey/textures/logo.png";
		event.getModMetadata().authorList = author;
	}

	@EventHandler
	public static void init(FMLInitializationEvent event) {
		proxy.init(event);
	}

	@EventHandler
	public static void postInit(FMLPostInitializationEvent event) {
		proxy.postInit(event);
	}

	public static void onLoadComplete(FMLLoadCompleteEvent event) {
		proxy.onLoadComplete(event);
	}

	@EventHandler
	public static void serverStarting(FMLServerStartingEvent event) {
		SlayerAPI.logger.info("Starting server...");
		proxy.serverStarting(event);
	}

	/**
	 * Creates resource location with {@link #MOD_ID} as a namespace and provided path.
	 *
	 * @param path path under {@link #MOD_ID} namespace.
	 */
	public static ResourceLocation rl(String path) {
		return new ResourceLocation(MOD_ID, path);
	}
}
